{% extends 'core/base.html' %}
{% block content %}




<main class="container py-5" style="max-width: 960px;">

    <div class="mb-4">
        <a href="applicants.html" class="text-decoration-none text-primary fw-bold">
            <i class="bi bi-chevron-left"></i> Back to Applicant List
        </a>
    </div>

    <div class="row g-4 g-lg-5">

        <div class="col-md-6">
            <div id="applicantCarousel" class="carousel slide border rounded shadow-sm" data-bs-ride="carousel">
                <div class="carousel-indicators">
                    <button type="button" data-bs-target="#applicantCarousel" data-bs-slide-to="0" class="active"
                        aria-current="true" aria-label="Slide 1"></button>
                    <button type="button" data-bs-target="#applicantCarousel" data-bs-slide-to="1"
                        aria-label="Slide 2"></button>
                    <button type="button" data-bs-target="#applicantCarousel" data-bs-slide-to="2"
                        aria-label="Slide 3"></button>
                    <button type="button" data-bs-target="#applicantCarousel" data-bs-slide-to="3"
                        aria-label="Slide 4"></button>
                </div>
                <div class="carousel-inner rounded">
                    {% if application.usher.photo_1 %}
                    <div class="carousel-item active">
                        <img src="{{ application.usher.photo_1.url }}" class="d-block w-100"
                            style="aspect-ratio: 3/4; object-fit: cover;" alt="Applicant Photo 1">
                    </div>
                    {% else %}
                    <div class="carousel-item active">
                        <img src="#" class="d-block w-100" style="aspect-ratio: 3/4; object-fit: cover;"
                            alt="Applicant Photo 1">
                    </div>
                    {% endif %}


                    {% if application.usher.photo_2 %}
                    <div class="carousel-item">
                        <img src="{{ application.usher.photo_2.url }}" class="d-block w-100"
                            style="aspect-ratio: 3/4; object-fit: cover;" alt="Applicant Photo 2">
                    </div>
                    {% else %}
                    <div class="carousel-item">
                        <img src="#" class="d-block w-100" style="aspect-ratio: 3/4; object-fit: cover;"
                            alt="Applicant Photo 2">
                    </div>
                    {% endif %}



                    {% if application.usher.photo_3 %}
                    <div class="carousel-item">
                        <img src="{{ application.usher.photo_3.url }}" class="d-block w-100"
                            style="aspect-ratio: 3/4; object-fit: cover;" alt="Applicant Photo 3">
                    </div>
                    {% else %}
                    <div class="carousel-item">
                        <img src="#" class="d-block w-100" style="aspect-ratio: 3/4; object-fit: cover;"
                            alt="Applicant Photo 3">
                    </div>
                    {% endif %}




                    {% if application.usher.photo_4 %}
                    <div class="carousel-item">
                        <img src="{{ application.usher.photo_4.url }}" class="d-block w-100"
                            style="aspect-ratio: 3/4; object-fit: cover;" alt="Applicant Photo 4">
                    </div>
                    {% else %}
                    <div class="carousel-item">
                        <img src="#" class="d-block w-100" style="aspect-ratio: 3/4; object-fit: cover;"
                            alt="Applicant Photo 4">
                    </div>
                    {% endif %}
                </div>
                <button class="carousel-control-prev" type="button" data-bs-target="#applicantCarousel"
                    data-bs-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Previous</span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#applicantCarousel"
                    data-bs-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Next</span>
                </button>
            </div>
        </div>

        <div class="col-md-6">
            <h2 class="fw-bold">{{ application.usher.user.full_name }}</h2>
            <hr>
            <ul class="list-unstyled lh-lg">
                <li><strong>Age:</strong> {{ application.usher.age }}</li>
                <li><strong>Height:</strong> {{ application.usher.height }}</li>
                <li><strong>Complexion:</strong> {{ application.usher.complexion }}</li>
            </ul>

            <h5 class="mt-4">Bio</h5>
            <p class="text-muted">
                {{ application.usher.bio }}
            </p>

            <hr class="my-4">


            <!-- 
            <form method="POST" action="{% url 'usherly-accept-reject' application.id %}">
                {% csrf_token %}
                <button type="submit" name="action" value="accept">TEST ACCEPT</button>
                <button type="submit" name="action" value="accept">Accept</button>
                <button type="submit" name="action" value="reject">Reject</button>
            </form> -->


            {% if application.status == 'pending' %}
            <form method="POST" id="statusForm" action="{% url 'usherly-accept-reject' application.id %}">
                {% csrf_token %}

            
                <div class="d-grid gap-2 d-sm-flex">
                    <button type="submit" name="action" value="reject" class="btn btn-outline-danger btn-lg flex-grow-1"
                        id="rejectBtn">
                        <i class="bi bi-x-circle me-2"></i>Reject Application
                    </button>
                    <button type="submit" name="action" value="accept" class="btn btn-success btn-lg flex-grow-1" id="acceptBtn">
                        <i class="bi bi-check-circle me-2"></i> Accept Application
                    </button>
                </div>
            </form>
            {% else %}
            <button class="btn btn-lg {% if application.status == 'accepted' %}btn-success{% else %}btn-danger{% endif %}" disabled>
                {{ application.status|capfirst }} âœ”
            </button>
            {% endif %}

        </div>


    </div>

</main>


<!-- <script>
    document.addEventListener('DOMContentLoaded', function () {
        const form = document.getElementById('statusForm');
        const acceptBtn = document.getElementById('acceptBtn');
        const rejectBtn = document.getElementById('rejectBtn');

        acceptBtn.addEventListener('click', function () {
            acceptBtn.textContent = 'Accepted';
            acceptBtn.disabled = true;
            rejectBtn.disabled = true;
        });

        rejectBtn.addEventListener('click', function () {
            rejectBtn.textContent = 'Rejected';
            rejectBtn.disabled = true;
            acceptBtn.disabled = true;
        });
    });
</script> -->

























{% endblock content %}